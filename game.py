import random
import sys

# –°–ª–æ–≤–∞—Ä—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ö–æ–¥–æ–≤ –∏ –∏—Ö –≤—ã–∏–≥—Ä—ã—à–Ω—ã—Ö/–ø—Ä–æ–∏–≥—Ä—ã—à–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
CHOICES = {
    "r": "–ö–∞–º–µ–Ω—å",
    "p": "–ë—É–º–∞–≥–∞",
    "s": "–ù–æ–∂–Ω–∏—Ü—ã"
}

# –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã: –∫–ª—é—á –ø–æ–±–µ–∂–¥–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ
RULES = {
    "r": "s",  # –ö–∞–º–µ–Ω—å –±—å–µ—Ç –ù–æ–∂–Ω–∏—Ü—ã
    "p": "r",  # –ë—É–º–∞–≥–∞ –±—å–µ—Ç –ö–∞–º–µ–Ω—å
    "s": "p"   # –ù–æ–∂–Ω–∏—Ü—ã –±—å—é—Ç –ë—É–º–∞–≥—É
}


def get_computer_choice():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π —Ö–æ–¥ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞."""
    return random.choice(list(CHOICES.keys()))


def get_user_choice():
    """–ü–æ–ª—É—á–∞–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
    while True:
        # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ö–æ–¥–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        print("\n–°–¥–µ–ª–∞–π—Ç–µ —Å–≤–æ–π —Ö–æ–¥:")
        print("  (r) - –ö–∞–º–µ–Ω—å")
        print("  (p) - –ë—É–º–∞–≥–∞")
        print("  (s) - –ù–æ–∂–Ω–∏—Ü—ã")
        print("  (q) - –í—ã—Ö–æ–¥ –∏–∑ –∏–≥—Ä—ã")

        user_input = input("–í–∞—à –≤—ã–±–æ—Ä: ").lower()

        if user_input == 'q':
            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∏–≥—Ä—ã
            print("–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–≥—Ä—É! –î–æ —Å–≤–∏–¥–∞–Ω–∏—è.")
            sys.exit()

        if user_input in CHOICES:
            return user_input
        else:
            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞
            print("üõë –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–≤–æ–¥. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ r, p, s –∏–ª–∏ q.")


def determine_winner(user_choice, computer_choice):
    """–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç."""

    print(f"\n–í–∞—à —Ö–æ–¥: {CHOICES[user_choice]}")
    print(f"–•–æ–¥ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞: {CHOICES[computer_choice]}")

    if user_choice == computer_choice:
        return "tie"
    elif RULES.get(user_choice) == computer_choice:
        return "user" # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–∏–≥—Ä–∞–ª
    else:
        return "computer" # –ö–æ–º–ø—å—é—Ç–µ—Ä –≤—ã–∏–≥—Ä–∞–ª


def main_game_loop():
    """–û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∏–≥—Ä—ã."""
    print("üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É '–ö–∞–º–µ–Ω—å-–ù–æ–∂–Ω–∏—Ü—ã-–ë—É–º–∞–≥–∞'! üéâ")

    while True:
        user_choice = get_user_choice()
        computer_choice = get_computer_choice()

        result = determine_winner(user_choice, computer_choice)

        if result == "user":
            print("üèÜ –í—ã –ø–æ–±–µ–¥–∏–ª–∏ –≤ —ç—Ç–æ–º —Ä–∞—É–Ω–¥–µ!")
        elif result == "computer":
            print("üòî –ö–æ–º–ø—å—é—Ç–µ—Ä –ø–æ–±–µ–¥–∏–ª –≤ —ç—Ç–æ–º —Ä–∞—É–Ω–¥–µ.")
        else:
            print("ü§ù –ù–∏—á—å—è!")


if __name__ == "__main__":
    main_game_loop()